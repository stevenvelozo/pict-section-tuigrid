"use strict";function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:e+""}function _toPrimitive(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PictSectionTuigrid=t()}}((function(){return function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[r]={exports:{}};e[r][0].call(d.exports,(function(t){return n(e[r][1][t]||t)}),d,d.exports,t,e,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){e.exports={name:"fable-serviceproviderbase",version:"3.0.15",description:"Simple base classes for fable services.",main:"source/Fable-ServiceProviderBase.js",scripts:{start:"node source/Fable-ServiceProviderBase.js",test:"npx mocha -u tdd -R spec",tests:"npx mocha -u tdd --exit -R spec --grep",coverage:"npx nyc --reporter=lcov --reporter=text-lcov npx mocha -- -u tdd -R spec",build:"npx quack build"},mocha:{diff:!0,extension:["js"],package:"./package.json",reporter:"spec",slow:"75",timeout:"5000",ui:"tdd","watch-files":["source/**/*.js","test/**/*.js"],"watch-ignore":["lib/vendor"]},repository:{type:"git",url:"https://github.com/stevenvelozo/fable-serviceproviderbase.git"},keywords:["entity","behavior"],author:"Steven Velozo <steven@velozo.com> (http://velozo.com/)",license:"MIT",bugs:{url:"https://github.com/stevenvelozo/fable-serviceproviderbase/issues"},homepage:"https://github.com/stevenvelozo/fable-serviceproviderbase",devDependencies:{fable:"^3.0.143",quackage:"^1.0.33"}}},{}],2:[function(t,e,i){const o=t("../package.json");class n{constructor(t,e,i){"object"==typeof t&&t.isFable?this.connectFable(t):this.fable=!1,this._PackageFableServiceProvider=o,this.fable?(this.UUID=t.getUUID(),this.options="object"==typeof e?e:{}):(this.options="object"!=typeof t||t.isFable?"object"==typeof e?e:{}:t,this.UUID="CORE-SVC-".concat(Math.floor(89999*Math.random()+1e4))),this.serviceType="Unknown-".concat(this.UUID),this.Hash="string"==typeof i?i:this.fable||"string"!=typeof e?"".concat(this.UUID):e}connectFable(t){if("object"!=typeof t||!t.isFable){let e="Fable Service Provider Base: Cannot connect to Fable, invalid Fable object passed in.  The pFable parameter was a [".concat(typeof t,"].}");return console.log(e),new Error(e)}return this.fable||(this.fable=t),this.log||(this.log=this.fable.Logging),this.services||(this.services=this.fable.services),this.servicesMap||(this.servicesMap=this.fable.servicesMap),!0}}_defineProperty(n,"isFableService",!0),e.exports=n,e.exports.CoreServiceProviderBase=n},{"../package.json":1}],3:[function(t,e,i){e.exports={name:"pict-view",version:"1.0.56",description:"Pict View Base Class",main:"source/Pict-View.js",scripts:{test:"./node_modules/.bin/mocha -u tdd -R spec",start:"node source/Pict-View.js",coverage:"./node_modules/.bin/nyc --reporter=lcov --reporter=text-lcov ./node_modules/mocha/bin/_mocha -- -u tdd -R spec",build:"npx quack build","docker-dev-build":"docker build ./ -f Dockerfile_LUXURYCode -t pict-view-image:local","docker-dev-run":'docker run -it -d --name pict-view-dev -p 30001:8080 -p 38086:8086 -v "$PWD/.config:/home/coder/.config"  -v "$PWD:/home/coder/pict-view" -u "$(id -u):$(id -g)" -e "DOCKER_USER=$USER" pict-view-image:local',"docker-dev-shell":"docker exec -it pict-view-dev /bin/bash",types:"npx -p typescript tsc -p . --outDir types"},types:"types/Pict-View.d.ts",repository:{type:"git",url:"git+https://github.com/stevenvelozo/pict-view.git"},author:"steven velozo <steven@velozo.com>",license:"MIT",bugs:{url:"https://github.com/stevenvelozo/pict-view/issues"},homepage:"https://github.com/stevenvelozo/pict-view#readme",devDependencies:{"browser-env":"^3.3.0",pict:"^1.0.226",quackage:"^1.0.36",typescript:"^5.7.2"},mocha:{diff:!0,extension:["js"],package:"./package.json",reporter:"spec",slow:"75",timeout:"5000",ui:"tdd","watch-files":["source/**/*.js","test/**/*.js"],"watch-ignore":["lib/vendor"]},dependencies:{fable:"^3.0.146","fable-serviceproviderbase":"^3.0.15"}}},{}],4:[function(t,e,i){const o=t("fable-serviceproviderbase"),n=t("../package.json"),s={DefaultRenderable:!1,DefaultDestinationAddress:!1,DefaultTemplateRecordAddress:!1,ViewIdentifier:!1,AutoInitialize:!0,AutoInitializeOrdinal:0,AutoRender:!0,AutoRenderOrdinal:0,AutoSolveWithApp:!0,AutoSolveOrdinal:0,CSSHash:!1,CSS:!1,CSSProvider:!1,CSSPriority:500,Templates:[],DefaultTemplates:[],Renderables:[],Manifests:{}};e.exports=class extends o{constructor(t,e,i){super(t,Object.assign({},JSON.parse(JSON.stringify(s)),e),i),this.fable,this.options,this.UUID,this.Hash,this.log,this.options.ViewIdentifier||(this.options.ViewIdentifier="AutoViewID-".concat(this.fable.getUUID())),this.serviceType="PictView",this._Package=n,this.pict=this.fable,this.AppData=this.pict.AppData,this.initializeTimestamp=!1,this.lastSolvedTimestamp=!1,this.lastRenderedTimestamp=!1,this.lastMarshalFromViewTimestamp=!1,this.lastMarshalToViewTimestamp=!1;for(let t=0;t<this.options.Templates.length;t++){let e=this.options.Templates[t];"Hash"in e&&"Template"in e?(e.Source||(e.Source="PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," options object.")),this.pict.TemplateProvider.addTemplate(e.Hash,e.Template,e.Source)):this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not load Template ").concat(t," in the options array."),e)}for(let t=0;t<this.options.DefaultTemplates.length;t++){let e=this.options.DefaultTemplates[t];"Postfix"in e&&"Template"in e?(e.Source||(e.Source="PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," options object.")),this.pict.TemplateProvider.addDefaultTemplate(e.Prefix,e.Postfix,e.Template,e.Source)):this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not load Default Template ").concat(t," in the options array."),e)}if(this.options.CSS){let t=this.options.CSSHash?this.options.CSSHash:"View-".concat(this.options.ViewIdentifier),e=this.options.CSSProvider?this.options.CSSProvider:t;this.pict.CSSMap.addCSS(t,this.options.CSS,e,this.options.CSSPriority)}this.renderables={};for(let t=0;t<this.options.Renderables.length;t++){let e=this.options.Renderables[t];this.addRenderable(e)}}addRenderable(t,e,i,o,n){let s;if("object"==typeof t)s=t;else{s={RenderableHash:t,TemplateHash:e,DefaultTemplateRecordAddress:i,ContentDestinationAddress:o,RenderMethod:"string"!=typeof n?n:"replace"}}"string"!=typeof s.RenderableHash||"string"!=typeof s.TemplateHash?this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not load Renderable; RenderableHash or TemplateHash are invalid."),s):(this.pict.LogNoisiness>0&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," adding renderable [").concat(s.RenderableHash,"] pointed to template ").concat(s.TemplateHash,".")),this.renderables[s.RenderableHash]=s)}onBeforeInitialize(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onBeforeInitialize:")),!0}onBeforeInitializeAsync(t){return this.onBeforeInitialize(),t()}onInitialize(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onInitialize:")),!0}onInitializeAsync(t){return this.onInitialize(),t()}initialize(){return this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow VIEW [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," initialize:")),this.initializeTimestamp?(this.log.warn("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," initialize called but initialization is already completed.  Aborting.")),!1):(this.onBeforeInitialize(),this.onInitialize(),this.onAfterInitialize(),this.initializeTimestamp=this.pict.log.getTimeStamp(),!0)}initializeAsync(t){if(this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow VIEW [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," initializeAsync:")),this.initializeTimestamp)return this.log.warn("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," async initialize called but initialization is already completed.  Aborting.")),t();{let e=this.pict.instantiateServiceProviderWithoutRegistration("Anticipate");this.pict.LogNoisiness>0&&this.log.info("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," beginning initialization...")),e.anticipate(this.onBeforeInitializeAsync.bind(this)),e.anticipate(this.onInitializeAsync.bind(this)),e.anticipate(this.onAfterInitializeAsync.bind(this)),e.wait((e=>(this.initializeTimestamp=this.pict.log.getTimeStamp(),this.pict.LogNoisiness>0&&this.log.info("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," initialization complete.")),t())))}}onAfterInitialize(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onAfterInitialize:")),!0}onAfterInitializeAsync(t){return this.onAfterInitialize(),t()}onBeforeRender(t,e,i){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onBeforeRender:")),!0}onBeforeRenderAsync(t){return t()}buildRenderOptions(t,e,i){let o={Valid:!0};return o.RenderableHash="string"==typeof t?t:"string"==typeof this.options.DefaultRenderable&&this.options.DefaultRenderable,o.RenderableHash||(this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not find a suitable RenderableHash ").concat(o.RenderableHash," (param ").concat(t,"because it is not a valid renderable.")),o.Valid=!1),o.Renderable=this.renderables[o.RenderableHash],o.Renderable||(this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(o.RenderableHash," (param ").concat(t,") because it does not exist.")),o.Valid=!1),o.DestinationAddress="string"==typeof e?e:"string"==typeof o.Renderable.ContentDestinationAddress?o.Renderable.ContentDestinationAddress:"string"==typeof this.options.DefaultDestinationAddress&&this.options.DefaultDestinationAddress,o.DestinationAddress||(this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(o.RenderableHash," (param ").concat(t,") because it does not have a valid destination address (param ").concat(e,").")),o.Valid=!1),"object"==typeof i?(o.RecordAddress="Passed in as object",o.Record=i):(o.RecordAddress="string"==typeof i?i:"string"==typeof o.Renderable.DefaultTemplateRecordAddress?o.Renderable.DefaultTemplateRecordAddress:"string"==typeof this.options.DefaultTemplateRecordAddress&&this.options.DefaultTemplateRecordAddress,o.Record="string"==typeof tmpRecordAddress?this.pict.DataProvider.getDataByAddress(tmpRecordAddress):void 0),o}assignRenderContent(t,e,i){return this.pict.ContentAssignment.projectContent(t.RenderMethod,e,i,t.TestAddress)}render(t,e,i){let o="string"==typeof t?t:"string"==typeof this.options.DefaultRenderable&&this.options.DefaultRenderable;if(!o)return this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(o," (param ").concat(t,") because it is not a valid renderable.")),!1;let n=this.renderables[o];if(!n)return this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(o," (param ").concat(t,") because it does not exist.")),!1;let s,r,a="string"==typeof e?e:"string"==typeof n.ContentDestinationAddress?n.ContentDestinationAddress:"string"==typeof this.options.DefaultDestinationAddress&&this.options.DefaultDestinationAddress;if(!a)return this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(o," (param ").concat(t,") because it does not have a valid destination address.")),!1;"object"==typeof i?(r=i,s="Passed in as object"):(s="string"==typeof i?i:"string"==typeof n.DefaultTemplateRecordAddress?n.DefaultTemplateRecordAddress:"string"==typeof this.options.DefaultTemplateRecordAddress&&this.options.DefaultTemplateRecordAddress,r="string"==typeof s?this.pict.DataProvider.getDataByAddress(s):void 0),this.onBeforeRender(n,a,r),this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow VIEW [".concat(this.UUID,"]::[").concat(this.Hash,"] Renderable[").concat(o,"] Destination[").concat(a,"] TemplateRecordAddress[").concat(s,"] render:")),this.pict.LogNoisiness>0&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," Beginning Render of Renderable[").concat(o,"] to Destination [").concat(a,"]..."));let c=this.pict.parseTemplateByHash(n.TemplateHash,r,null,[this]);return this.pict.LogNoisiness>0&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," Assigning Renderable[").concat(o,"] content length ").concat(c.length," to Destination [").concat(a,"] using render method [").concat(n.RenderMethod,"].")),this.pict.ContentAssignment.projectContent(n.RenderMethod,a,c,n.TestAddress),this.onAfterRender(n,a,r,c),this.lastRenderedTimestamp=this.pict.log.getTimeStamp(),!0}renderAsync(t,e,i,o){let n="string"==typeof t?t:"string"==typeof this.options.DefaultRenderable&&this.options.DefaultRenderable,s="function"==typeof o?o:"function"==typeof i?i:"function"==typeof e?e:"function"==typeof t&&t;if(s||(this.log.warn("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," renderAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),s=t=>{t&&this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," renderAsync Auto Callback Error: ").concat(t),t)}),!n)return this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not asynchronously render ").concat(n," (param ").concat(t,"because it is not a valid renderable.")),s(Error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not asynchronously render ").concat(n," (param ").concat(t,"because it is not a valid renderable.")));let r=this.renderables[n];if(!r)return this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(n," (param ").concat(t,") because it does not exist.")),s(Error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(n," (param ").concat(t,") because it does not exist.")));let a,c,l="string"==typeof e?e:"string"==typeof r.ContentDestinationAddress?r.ContentDestinationAddress:"string"==typeof this.options.DefaultDestinationAddress&&this.options.DefaultDestinationAddress;if(!l)return this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render ").concat(n," (param ").concat(t,") because it does not have a valid destination address.")),s(Error("Could not render ".concat(n)));"object"==typeof i?(c=i,a="Passed in as object"):(a="string"==typeof i?i:"string"==typeof r.DefaultTemplateRecordAddress?r.DefaultTemplateRecordAddress:"string"==typeof this.options.DefaultTemplateRecordAddress&&this.options.DefaultTemplateRecordAddress,c="string"==typeof a?this.pict.DataProvider.getDataByAddress(a):void 0),this.pict.LogControlFlow&&this.log.trace("PICT-ControlFlow VIEW [".concat(this.UUID,"]::[").concat(this.Hash,"] Renderable[").concat(n,"] Destination[").concat(l,"] TemplateRecordAddress[").concat(a,"] renderAsync:")),this.pict.LogNoisiness>2&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," Beginning Asynchronous Render (callback-style)..."));let d,h=this.fable.newAnticipate();h.anticipate((t=>{this.onBeforeRender(r,l,c),this.onBeforeRenderAsync(t)})),h.anticipate((e=>{this.pict.parseTemplateByHash(r.TemplateHash,c,((i,o)=>i?(this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render (asynchronously) ").concat(n," (param ").concat(t,") because it did not parse the template."),i),e(i)):(d=o,this.pict.LogNoisiness>0&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," Assigning Renderable[").concat(n,"] content length ").concat(o.length," to Destination [").concat(l,"] using Async render method ").concat(r.RenderMethod,".")),this.pict.ContentAssignment.projectContent(r.RenderMethod,l,o,r.TestAddress),this.lastRenderedTimestamp=this.pict.log.getTimeStamp(),e())),[this])})),h.anticipate((t=>{this.onAfterRender(r,l,c,d),this.onAfterRenderAsync(t)})),h.wait(s)}renderDefaultAsync(t){this.renderAsync(t)}basicRender(t,e,i){let o=this.buildRenderOptions(t,e,i);return o.Valid?(this.assignRenderContent(o.Renderable,o.DestinationAddress,this.pict.parseTemplateByHash(o.Renderable.TemplateHash,o.Record,null,[this])),!0):(this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not perform a basic render of ").concat(o.RenderableHash," because it is not valid.")),!1)}basicRenderAsync(t,e,i,o){let n="function"==typeof o?o:"function"==typeof i?i:"function"==typeof e?e:"function"==typeof t&&t,s=this.buildRenderOptions(t,e,i);if(!s.Valid){let t="PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not perform a basic render of ").concat(s.RenderableHash," because it is not valid.");return this.log.error(t),n(t)}this.pict.parseTemplateByHash(s.Renderable.TemplateHash,s.Record,((t,e)=>t?(this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," could not render (asynchronously) ").concat(s.RenderableHash," because it did not parse the template."),t),n(t)):(this.assignRenderContent(s.Renderable,s.DestinationAddress,e),n())),[this])}onAfterRender(t,e,i,o){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onAfterRender:")),!0}onAfterRenderAsync(t){return t()}onBeforeSolve(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onBeforeSolve:")),!0}onBeforeSolveAsync(t){return this.onBeforeSolve(),t()}onSolve(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onSolve:")),!0}onSolveAsync(t){return this.onSolve(),t()}solve(){return this.pict.LogNoisiness>2&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," executing solve() function...")),this.onBeforeSolve(),this.onSolve(),this.onAfterSolve(),this.lastSolvedTimestamp=this.pict.log.getTimeStamp(),!0}solveAsync(t){let e=this.pict.instantiateServiceProviderWithoutRegistration("Anticipate"),i="function"==typeof t&&t;i||(this.log.warn("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," solveAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),i=t=>{t&&this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," solveAsync Auto Callback Error: ").concat(t),t)}),e.anticipate(this.onBeforeSolveAsync.bind(this)),e.anticipate(this.onSolveAsync.bind(this)),e.anticipate(this.onAfterSolveAsync.bind(this)),e.wait((t=>(this.pict.LogNoisiness>2&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," solveAsync() complete.")),this.lastSolvedTimestamp=this.pict.log.getTimeStamp(),i(t))))}onAfterSolve(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onAfterSolve:")),!0}onAfterSolveAsync(t){return this.onAfterSolve(),t()}onBeforeMarshalFromView(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onBeforeMarshalFromView:")),!0}onBeforeMarshalFromViewAsync(t){return this.onBeforeMarshalFromView(),t()}onMarshalFromView(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onMarshalFromView:")),!0}onMarshalFromViewAsync(t){return this.onMarshalFromView(),t()}marshalFromView(){return this.pict.LogNoisiness>2&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," executing solve() function...")),this.onBeforeMarshalFromView(),this.onMarshalFromView(),this.onAfterMarshalFromView(),this.lastMarshalFromViewTimestamp=this.pict.log.getTimeStamp(),!0}marshalFromViewAsync(t){let e=this.pict.instantiateServiceProviderWithoutRegistration("Anticipate"),i="function"==typeof t&&t;i||(this.log.warn("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," marshalFromViewAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),i=t=>{t&&this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," marshalFromViewAsync Auto Callback Error: ").concat(t),t)}),e.anticipate(this.onBeforeMarshalFromViewAsync.bind(this)),e.anticipate(this.onMarshalFromViewAsync.bind(this)),e.anticipate(this.onAfterMarshalFromViewAsync.bind(this)),e.wait((t=>(this.pict.LogNoisiness>2&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," marshalFromViewAsync() complete.")),this.lastMarshalFromViewTimestamp=this.pict.log.getTimeStamp(),i(t))))}onAfterMarshalFromView(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onAfterMarshalFromView:")),!0}onAfterMarshalFromViewAsync(t){return this.onAfterMarshalFromView(),t()}onBeforeMarshalToView(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onBeforeMarshalToView:")),!0}onBeforeMarshalToViewAsync(t){return this.onBeforeMarshalToView(),t()}onMarshalToView(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onMarshalToView:")),!0}onMarshalToViewAsync(t){return this.onMarshalToView(),t()}marshalToView(){return this.pict.LogNoisiness>2&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," executing solve() function...")),this.onBeforeMarshalToView(),this.onMarshalToView(),this.onAfterMarshalToView(),this.lastMarshalToViewTimestamp=this.pict.log.getTimeStamp(),!0}marshalToViewAsync(t){let e=this.pict.instantiateServiceProviderWithoutRegistration("Anticipate"),i="function"==typeof t&&t;i||(this.log.warn("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," marshalToViewAsync was called without a valid callback.  A callback will be generated but this could lead to race conditions.")),i=t=>{t&&this.log.error("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.Name," marshalToViewAsync Auto Callback Error: ").concat(t),t)}),e.anticipate(this.onBeforeMarshalToViewAsync.bind(this)),e.anticipate(this.onMarshalToViewAsync.bind(this)),e.anticipate(this.onAfterMarshalToViewAsync.bind(this)),e.wait((t=>(this.pict.LogNoisiness>2&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," marshalToViewAsync() complete.")),this.lastMarshalToViewTimestamp=this.pict.log.getTimeStamp(),i(t))))}onAfterMarshalToView(){return this.pict.LogNoisiness>3&&this.log.trace("PictView [".concat(this.UUID,"]::[").concat(this.Hash,"] ").concat(this.options.ViewIdentifier," onAfterMarshalToView:")),!0}onAfterMarshalToViewAsync(t){return this.onAfterMarshalToView(),t()}get isPictView(){return!0}}},{"../package.json":3,"fable-serviceproviderbase":2}],5:[function(t,e,i){e.exports={RenderOnLoad:!0,GridWidth:"auto",GridRowHeight:40,GridBodyHeight:"auto",GridBodyMinHeight:130,GridColumnMinWidth:50,GridColumnWidthResizable:!0,GridColumnHeightResizable:!1,GridColumnFrozenCount:0,GridColumnFrozenBorderWidth:3,GridScrollX:!0,GridScrollY:!0,GridShowDummyRows:!1,GridDraggableRows:!1,GridSelectionUnit:"cell",DefaultRenderable:"TuiGrid-Wrap",DefaultDestinationAddress:"#TuiGrid-Container-Div",Templates:[{Hash:"TuiGrid-Container",Template:"\x3c!-- TuiGrid-Container Rendering Soon --\x3e"}],Renderables:[{RenderableHash:"TuiGrid-Wrap",TemplateHash:"TuiGrid-Container",DestinationAddress:"#TuiGrid-Container-Div"}],TargetElementAddress:"#TuiGrid-Container-Div",GridDataAddress:!1,GridData:[{idrecord:1,entity:"SampleEntity",name:"Record name 1",description:"description 1"},{idrecord:2,entity:"SampleEntity",name:"Record name 2",description:"description 2"},{idrecord:3,entity:"SampleEntity",name:"Record name 3",description:"description 3"},{idrecord:4,entity:"SampleEntity",name:"Record name 4",description:"description 4"},{idrecord:5,entity:"SampleEntity",name:"Record name 5",description:"description 5"},{idrecord:6,entity:"SampleEntity",name:"Record name 6",description:"description 6"},{idrecord:7,entity:"SampleEntity",name:"Record name 7",description:"description 7"},{idrecord:8,entity:"SampleEntity",name:"Record name 8",description:"description 8"},{idrecord:9,entity:"SampleEntity",name:"Record name 9",description:"description 9"}],ColumnsToSolveOnChange:{},TuiColumnSchema:[{header:"IDRecord",name:"idrecord",PictTriggerSolveOnChange:!0},{header:"Entity",name:"entity",PictTriggerSolveOnChange:!0},{header:"Name",name:"name",editor:"text"},{header:"Description",name:"description",editor:"text"}]}},{}],6:[function(t,e,i){const o=t("pict-view");e.exports=class extends o{constructor(e,i,o){super(e,Object.assign({},t("./Pict-Section-TuiGrid-DefaultConfiguration.json"),i),o),this.services,this.dateFormatter=this.fable.instantiateServiceProviderWithoutRegistration("Dates"),this.initialRenderComplete=!1,this.customFormatters={}}onBeforeInitialize(){return super.onBeforeInitialize(),this._tuiGridPrototype=null,this.tuiGrid=null,this.customHeaders=t("./Pict-TuiGrid-Headers.js"),this.customEditors=t("./Pict-TuiGrid-Editors.js"),this.initializeCustomFormatters(),this.columnSchema=!1,this.targetElementAddress=!1,this.gridData=null,super.onBeforeInitialize()}initializeCustomFormatters(){this.customFormatters.FormatterTwoDigitNumber=t=>{var e;let i=Number.parseFloat(t.value),o=null!==(e=null==t?void 0:t.decimalPrecision)&&void 0!==e?e:2;return isNaN(i)?"":this.fable.Math.roundPrecise(t.value,o)},this.customFormatters.FormatterCurrencyNumber=t=>{var e;let i=null!==(e=null==t?void 0:t.decimalPrecision)&&void 0!==e?e:2;return this.fable.DataFormat.formatterDollars(t.value,i)},this.customFormatters.FormatterRoundedNumber=t=>{var e;let i=Number.parseFloat(t.value),o=null!==(e=null==t?void 0:t.decimalPrecision)&&void 0!==e?e:2;return isNaN(i)?"":this.fable.Math.roundPrecise(t.value,o)},this.customFormatters.FormatterDate=t=>{let e=this.fable.Dates.dayJS.utc(t.value);return t.dateformat?e.format(t.dateformat):e.format()}}connectTuiGridPrototype(t){if(void 0!==t)this._tuiGridPrototype=t;else{if(this.log.trace("PICT-TuiGrid No TuiGrid Prototype defined or explicitly set; looking for it in the window object."),"undefined"==typeof window)return this.log.error("PICT-TuiGrid No TuiGrid Prototype found in window.tuiGrid -- window object unavailable."),!1;if(void 0===window.tui||void 0===window.tui.Grid)return this.log.error("PICT-TuiGrid No TuiGrid Prototype found in window.tuiGrid."),!1;this.log.trace("PICT-TuiGrid Found TuiGrid Prototype in window.tuiGrid."),this.connectTuiGridPrototype(window.tui.Grid)}}preChangeHandler(t){}changeHandler(t){let e=!1;for(let i=0;i<t.changes.length;i++){let o=t.instance.getValue(t.changes[i].rowKey,"entity"),n=t.instance.getValue(t.changes[i].rowKey,"idrecord");this.log.trace("Generic Change Handler for TuiGrid Fired, Entity ".concat(o," IDRecord ").concat(n," setting Column [").concat(t.changes[i].value,"] to new Value [").concat(t.changes[i].value,"]")),this.options.ColumnsToSolveOnChange.hasOwnProperty(t.changes[i].columnName)&&(e=!0)}e&&this.services.PictApplication.solve()}onAfterRender(){return this.initialRenderComplete||(this.onAfterInitialRender(),this.initialRenderComplete=!0),super.onAfterRender()}onAfterInitialRender(){if(this._tuiGridPrototype||this.connectTuiGridPrototype(),this.tuiGrid)return this.log.error("TuiGrid going to ".concat(this.options.TargetElementAddress," is already initialized!")),!1;if(this.options.GridDataAddress){let t=this.fable.manifest.getValueByHash(this.AppData,this.options.GridDataAddress);"object"!=typeof t?(this.log.error("Address for GridData [".concat(this.options.GridDataAddress,"] did not return an object; it was a ").concat(typeof t,".")),this.gridData=[]):this.gridData=JSON.parse(JSON.stringify(t))}else this.gridData=[];let t=this.services.ContentAssignment.getElement(this.options.TargetElementAddress);if(t.length<1)return this.log.error("Could not find target element [".concat(this.options.TargetElementAddress,"] for TuiGrid!  Rendering won't function properly.")),this.targetElement=!1,!1;this.targetElement=t[0],this.columnSchema=this.options.TuiColumnSchema;for(let t=0;t<this.columnSchema.length;t++){let e=this.columnSchema[t];if(e.PictTriggerSolveOnChange&&(this.options.ColumnsToSolveOnChange[e.name]=e),e.hasOwnProperty("formatter")&&this.customFormatters.hasOwnProperty(e.formatter)&&(e.formatter=this.customFormatters[e.formatter]),e.hasOwnProperty("editor")&&(e.editor.hasOwnProperty("type")&&"string"==typeof e.editor.type&&this.customEditors.hasOwnProperty(e.editor.type)&&(e.editor.type=this.customEditors[e.editor.type]),e.editor.hasOwnProperty("options")&&"object"==typeof e.editor.options&&e.editor.options.hasOwnProperty("listItems")&&"string"==typeof e.editor.options.listItems)){let t=this.fable.manifest.getValueByHash({AppData:this.AppData,Options:this.options},e.editor.options.listItems);"object"==typeof t?e.editor.options.listItems=t:(this.log.warn("Pict TuiGrid for column [".concat(e.name,"] had [").concat(e.editor.options.listItems,"] as a listItems address, but it didn't return an object.  It was a [").concat(typeof t,"].  Setting to empty list.")),e.editor.options.listItems=[])}}this.gridSettings={data:this.gridData,el:this.targetElement,columns:this.columnSchema,usageStatistics:!1,scrollY:this.options.GridScrollY,columnOptions:{resizable:this.options.GridColumnWidthResizable}},this.customConfigureGridSettings();let e=this._tuiGridPrototype;this.tuiGrid=new e(this.gridSettings),this.tuiGrid.on("beforeChange",(t=>{const e=t;this.preChangeHandler(e)})),this.tuiGrid.on("afterChange",(t=>{const e=t;this.changeHandler(e)}))}customConfigureGridSettings(){}SetGridValue(t,e,i,o){if(void 0===i)return void console.log("Could not set grid value [".concat(t,"] = [").concat(e,"] looked up by [").concat(o,"]::[").concat(i,"].  No valid lookup value!"));if(!this.tuiGrid)return void this.log.warn("Could not set grid value [".concat(t,"] = [").concat(e,"] looked up by [").concat(o,"]::[").concat(i,"].  No valid grid!"));const n=this.tuiGrid.getData();for(let s=0;s<n.length;s++){n[s][o]==i&&this.tuiGrid.setValue(s,t,e)}}SetGridValueByRowKey(t,e,i){return void 0===i?(this.log.error("Could not set grid value [".concat(t,"] = [").concat(e,"] looked up by row key [").concat(i,"].  No valid row key!")),!1):this.tuiGrid?(this.tuiGrid.setValue(i,t,e),!0):(this.log.warn("Could not set grid value [".concat(t,"] = [").concat(e,"] looked up by row key [").concat(i,"].  No valid grid!")),!1)}},e.exports.default_configuration=t("./Pict-Section-TuiGrid-DefaultConfiguration.json")},{"./Pict-Section-TuiGrid-DefaultConfiguration.json":5,"./Pict-TuiGrid-Editors.js":9,"./Pict-TuiGrid-Headers.js":10,"pict-view":4}],7:[function(t,e,i){e.exports=class{constructor(t){const e=document.createElement("input"),i=t.columnInfo.editor.options.decimalPrecision?t.columnInfo.editor.options.decimalPrecision:3;e.type="number",e.value=String(t.value),e.oninput=t=>{if(t.target instanceof HTMLInputElement){const e=parseFloat(t.target.value).toFixed(i).toString();e.length<parseFloat(t.target.value).toString().length&&(t.target.value=e)}},this.Element=e}getElement(){return this.Element}getValue(){return this.Element.value}mounted(){this.Element.select()}}},{}],8:[function(t,e,i){e.exports=class{constructor(t){const e=document.createElement("input");e.type="text",e.value=String(t.value),e.placeholder=t.columnInfo.editor.options.placeholder||"",e.pattern=t.columnInfo.editor.options.pattern||"",e.minLength=t.columnInfo.editor.options.minLength||"",e.maxLength=t.columnInfo.editor.options.maxLength||"",e.required=t.columnInfo.editor.options.required||"",this.Element=e}getElement(){return this.Element}getValue(){return this.Element.value}mounted(){this.Element.select()}}},{}],9:[function(t,e,i){e.exports={EditorNumber:t("./Pict-TuiGrid-Editor-Number.js"),EditorText:t("./Pict-TuiGrid-Editor-Text.js")}},{"./Pict-TuiGrid-Editor-Number.js":7,"./Pict-TuiGrid-Editor-Text.js":8}],10:[function(t,e,i){e.exports={CustomColumnHeaderNone:class{constructor(){let t=document.createElement("input");t.type="hidden",t.value="",this.Element=t}getElement(){return this.Element}render(){}}}},{}]},{},[6])(6)}));
//# sourceMappingURL=pict-section-tuigrid.min.js.map
